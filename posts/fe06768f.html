<!DOCTYPE html>
<html lang=zh>
<head>
  <meta charset="utf-8">
  
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  <!-- Color theme for statusbar -->
  <meta name="theme-color" content="#000000" />
  <!-- 强制页面在当前窗口以独立页面显示,防止别人在框架里调用页面 -->
  <meta http-equiv="window-target" content="_top" />
  
  
  <title>Kafka常见面试题 | LUO DEXIN Blog</title>
  <meta name="description" content="1. 什么是kafkaKafka是分布式发布-订阅消息系统，它最初是由LinkedIn公司开发的，之后成为Apache项目的一部分，Kafka是一个分布式，可划分的，冗余备份的持久性的日志服务系统，它主要用于处理流式数据。 2. 为什么要使用 kafka，为什么要使用消息队列缓冲和削峰：上游数据时有突发流量，下游可能扛不住，或者下游没有足够多的机器来保证冗余，kafka在中间可以起到一个缓冲的作用">
<meta property="og:type" content="article">
<meta property="og:title" content="Kafka常见面试题">
<meta property="og:url" content="http://blog.luodexin.com/posts/fe06768f.html">
<meta property="og:site_name" content="DexBlog">
<meta property="og:description" content="1. 什么是kafkaKafka是分布式发布-订阅消息系统，它最初是由LinkedIn公司开发的，之后成为Apache项目的一部分，Kafka是一个分布式，可划分的，冗余备份的持久性的日志服务系统，它主要用于处理流式数据。 2. 为什么要使用 kafka，为什么要使用消息队列缓冲和削峰：上游数据时有突发流量，下游可能扛不住，或者下游没有足够多的机器来保证冗余，kafka在中间可以起到一个缓冲的作用">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://bucket-img01.oss-cn-shenzhen.aliyuncs.com/cs-note/01.Kafka%E9%9D%A2%E8%AF%95%E9%A2%98-2020-10-27-08-37-50.png">
<meta property="og:image" content="http://bucket-img01.oss-cn-shenzhen.aliyuncs.com/cs-note/01.Kafka%E9%9D%A2%E8%AF%95%E9%A2%98-2020-10-27-09-08-49.png">
<meta property="article:published_time" content="2020-11-01T15:47:21.000Z">
<meta property="article:modified_time" content="2020-11-07T11:38:57.285Z">
<meta property="article:author" content="Dexin Luo">
<meta property="article:tag" content="MQ">
<meta property="article:tag" content="Kafka">
<meta property="article:tag" content="面试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://bucket-img01.oss-cn-shenzhen.aliyuncs.com/cs-note/01.Kafka%E9%9D%A2%E8%AF%95%E9%A2%98-2020-10-27-08-37-50.png">
  <!-- Canonical links -->
  <link rel="canonical" href="http://blog.luodexin.com/posts/fe06768f.html">
  
    <link rel="alternate" href="/atom.xml" title="DexBlog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png" type="image/x-icon">
  
  
<link rel="stylesheet" href="/css/style.css">

  
  
  
  
<meta name="generator" content="Hexo 5.2.0"></head>


<body class="main-center" itemscope itemtype="http://schema.org/WebPage">
  <header class="header" itemscope itemtype="http://schema.org/WPHeader">
  <div class="slimContent">
    <div class="navbar-header">
      
      
      <div class="profile-block text-center">
        <a id="avatar" href="https://www.luodexin.com" target="_blank">
          <img class="img-circle" src="/images/avatar.jpg" width="200" height="200">
        </a>
        <h2 id="name" class="hidden-xs hidden-sm">Dexin L.</h2>
        <h3 id="title" class="hidden-xs hidden-sm hidden-md">Software Developer</h3>
        <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shenzhen, China</small>
      </div>
      
      <div class="search" id="search-form-wrap">

    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="搜索" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i class="icon icon-search"></i></button>
            </span>
        </div>
    </form>
    <div class="ins-search">
  <div class="ins-search-mask"></div>
  <div class="ins-search-container">
    <div class="ins-input-wrapper">
      <input type="text" class="ins-search-input" placeholder="想要查找什么..." x-webkit-speech />
      <button type="button" class="close ins-close ins-selectable" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
    </div>
    <div class="ins-section-wrapper">
      <div class="ins-section-container"></div>
    </div>
  </div>
</div>


</div>
      <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>
    <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
      <ul class="nav navbar-nav main-nav ">
        
        
        <li class="menu-item menu-item-home">
          <a href="/.">
            
            <i class="icon icon-home-fill"></i>
            
            <span class="menu-title">首页</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            
            <i class="icon icon-archives-fill"></i>
            
            <span class="menu-title">归档</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-categories">
          <a href="/categories">
            
            <i class="icon icon-folder"></i>
            
            <span class="menu-title">分类</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-tags">
          <a href="/tags">
            
            <i class="icon icon-tags"></i>
            
            <span class="menu-title">标签</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-links">
          <a href="/links">
            
            <i class="icon icon-friendship"></i>
            
            <span class="menu-title">友链</span>
          </a>
        </li>
        
        
        <li class="menu-item menu-item-about">
          <a href="/about">
            
            <i class="icon icon-cup-fill"></i>
            
            <span class="menu-title">关于</span>
          </a>
        </li>
        
      </ul>
      
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/luodexin" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    </nav>
  </div>
</header>

  
    <aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title">公告</h3>
    <div class="widget-body">
        <div id="board">
            <div class="content">
                <p>欢迎交流与分享经验!</p>
            </div>
        </div>
    </div>
</div>

    
      
  <div class="widget">
    <h3 class="widget-title">分类</h3>
    <div class="widget-body">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DB-MySQL/">DB - MySQL</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Concurrent/">Java - Concurrent</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-Foundation/">Java - Foundation</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-JVM/">Java - JVM</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-NIO/">Java - NIO</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Linux-%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/">Linux - 常用命令</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MQ/">MQ</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/MQ-Kafka/">MQ - Kafka</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Redis-%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98/">Redis - 常见问题</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-SpringCloud/">Spring - SpringCloud</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Spring-SpringFramework/">Spring - SpringFramework</a><span class="category-list-count">4</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">标签</h3>
    <div class="widget-body">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/AOP/" rel="tag">AOP</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/JVM/" rel="tag">JVM</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Java/" rel="tag">Java</a><span class="tag-list-count">8</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Kafka/" rel="tag">Kafka</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/" rel="tag">Linux</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MQ/" rel="tag">MQ</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/MySQL/" rel="tag">MySQL</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NIO/" rel="tag">NIO</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/" rel="tag">Redis</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Spring/" rel="tag">Spring</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Zuul/" rel="tag">Zuul</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E4%BA%8B%E5%8A%A1/" rel="tag">事务</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" rel="tag">多线程</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%97%A5%E5%BF%97/" rel="tag">日志</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%BA%90%E7%A0%81/" rel="tag">源码</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">归档</h3>
    <div class="widget-body">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">十一月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">二月 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">六月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">三月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">二月 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">十月 2018</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/01/">一月 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">8</span></li></ul>
    </div>
  </div>


    
      
  <div class="widget">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget-body">
      <ul class="recent-post-list list-unstyled ">
        
          <li>
            
            <div class="item-thumb">
              <a href="/posts/fe06768f.html" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/MQ-Kafka/">MQ - Kafka</a>
              </p>
              <p class="item-title">
                <a href="/posts/fe06768f.html" class="title">Kafka常见面试题</a>
              </p>
              <p class="item-date">
                <time datetime="2020-11-01T15:47:21.000Z" itemprop="datePublished">2020-11-01</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/posts/a221d6b6.html" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/DB-MySQL/">DB - MySQL</a>
              </p>
              <p class="item-title">
                <a href="/posts/a221d6b6.html" class="title">MySQL事务的实现</a>
              </p>
              <p class="item-date">
                <time datetime="2020-02-15T02:27:36.000Z" itemprop="datePublished">2020-02-15</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/posts/aca7477a.html" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Spring-SpringCloud/">Spring - SpringCloud</a>
              </p>
              <p class="item-title">
                <a href="/posts/aca7477a.html" class="title">Spring Cloud 微服务网关--Zuul</a>
              </p>
              <p class="item-date">
                <time datetime="2019-06-07T12:17:59.000Z" itemprop="datePublished">2019-06-07</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/posts/b19a926a.html" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Spring-SpringFramework/">Spring - SpringFramework</a>
              </p>
              <p class="item-title">
                <a href="/posts/b19a926a.html" class="title">Spring AOP 编程</a>
              </p>
              <p class="item-date">
                <time datetime="2019-03-18T06:12:59.000Z" itemprop="datePublished">2019-03-18</time>
              </p>
            </div>
          </li>
          
          <li>
            
            <div class="item-thumb">
              <a href="/posts/73f5d5a4.html" class="thumb">
    
    
        <span class="thumb-image thumb-none"></span>
    
</a>

            </div>
            
            <div class="item-inner">
              <p class="item-category">
                <a class="category-link" href="/categories/Spring-SpringFramework/">Spring - SpringFramework</a>
              </p>
              <p class="item-title">
                <a href="/posts/73f5d5a4.html" class="title">Spring IoC 容器初始化流程</a>
              </p>
              <p class="item-date">
                <time datetime="2019-02-08T06:12:59.000Z" itemprop="datePublished">2019-02-08</time>
              </p>
            </div>
          </li>
          
      </ul>
    </div>
  </div>
  

    
  </div>
</aside>

  
  
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <nav id="toc" class="article-toc">
      <h3 class="toc-title">文章目录</h3>
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E4%BB%80%E4%B9%88%E6%98%AFkafka"><span class="toc-number">1.</span> <span class="toc-text">1. 什么是kafka</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8-kafka%EF%BC%8C%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="toc-number">2.</span> <span class="toc-text">2. 为什么要使用 kafka，为什么要使用消息队列</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-Kafka%E4%B8%AD%E7%9A%84ISR%E3%80%81AR%E5%8F%88%E4%BB%A3%E8%A1%A8%E4%BB%80%E4%B9%88%EF%BC%9FISR%E7%9A%84%E4%BC%B8%E7%BC%A9%E5%8F%88%E6%8C%87%E4%BB%80%E4%B9%88"><span class="toc-number">3.</span> <span class="toc-text">3. Kafka中的ISR、AR又代表什么？ISR的伸缩又指什么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-kafka%E4%B8%AD%E7%9A%84broker-%E6%98%AF%E5%B9%B2%E4%BB%80%E4%B9%88%E7%9A%84"><span class="toc-number">4.</span> <span class="toc-text">4. kafka中的broker 是干什么的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-kafka%E4%B8%AD%E7%9A%84-zookeeper-%E8%B5%B7%E5%88%B0%E4%BB%80%E4%B9%88%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%8F%AF%E4%BB%A5%E4%B8%8D%E7%94%A8zookeeper%E4%B9%88"><span class="toc-number">5.</span> <span class="toc-text">5. kafka中的 zookeeper 起到什么作用，可以不用zookeeper么</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-kafka-follower%E5%A6%82%E4%BD%95%E4%B8%8Eleader%E5%90%8C%E6%AD%A5%E6%95%B0%E6%8D%AE"><span class="toc-number">6.</span> <span class="toc-text">6. kafka follower如何与leader同步数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%E4%B8%80%E4%B8%AA-broker-%E4%BC%9A%E4%BB%8E-isr%E4%B8%AD%E8%B8%A2%E5%87%BA%E5%8E%BB"><span class="toc-number">7.</span> <span class="toc-text">7. 什么情况下一个 broker 会从 isr中踢出去</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-kafka-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%82%A3%E4%B9%88%E5%BF%AB"><span class="toc-number">8.</span> <span class="toc-text">8. kafka 为什么那么快</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#9-kafka-producer%E5%A6%82%E4%BD%95%E4%BC%98%E5%8C%96%E6%89%93%E5%85%A5%E9%80%9F%E5%BA%A6"><span class="toc-number">9.</span> <span class="toc-text">9. kafka producer如何优化打入速度</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#10-kafka-producer-%E6%89%93%E6%95%B0%E6%8D%AE%EF%BC%8Cack-%E4%B8%BA-0%EF%BC%8C-1%EF%BC%8C-1-%E7%9A%84%E6%97%B6%E5%80%99%E4%BB%A3%E8%A1%A8%E5%95%A5%EF%BC%8C-%E8%AE%BE%E7%BD%AE-1-%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E4%BB%80%E4%B9%88%E6%83%85%E5%86%B5%E4%B8%8B%EF%BC%8Cleader-%E4%BC%9A%E8%AE%A4%E4%B8%BA%E4%B8%80%E6%9D%A1%E6%B6%88%E6%81%AF-commit%E4%BA%86"><span class="toc-number">10.</span> <span class="toc-text">10. kafka producer 打数据，ack  为 0， 1， -1 的时候代表啥， 设置 -1 的时候，什么情况下，leader 会认为一条消息 commit了</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#11-kafka-unclean-%E9%85%8D%E7%BD%AE%E4%BB%A3%E8%A1%A8%E5%95%A5%EF%BC%8C%E4%BC%9A%E5%AF%B9-spark-streaming-%E6%B6%88%E8%B4%B9%E6%9C%89%E4%BB%80%E4%B9%88%E5%BD%B1%E5%93%8D"><span class="toc-number">11.</span> <span class="toc-text">11. kafka  unclean 配置代表啥，会对 spark streaming 消费有什么影响</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#12-%E5%A6%82%E6%9E%9Cleader-crash%E6%97%B6%EF%BC%8CISR%E4%B8%BA%E7%A9%BA%E6%80%8E%E4%B9%88%E5%8A%9E"><span class="toc-number">12.</span> <span class="toc-text">12. 如果leader crash时，ISR为空怎么办</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#13-kafka%E7%9A%84message%E6%A0%BC%E5%BC%8F%E6%98%AF%E4%BB%80%E4%B9%88%E6%A0%B7%E7%9A%84"><span class="toc-number">13.</span> <span class="toc-text">13. kafka的message格式是什么样的</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#14-kafka%E4%B8%ADconsumer-group-%E6%98%AF%E4%BB%80%E4%B9%88%E6%A6%82%E5%BF%B5"><span class="toc-number">14.</span> <span class="toc-text">14. kafka中consumer group 是什么概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#15-Kafka%E4%B8%AD%E7%9A%84%E6%B6%88%E6%81%AF%E6%98%AF%E5%90%A6%E4%BC%9A%E4%B8%A2%E5%A4%B1%EF%BC%9F"><span class="toc-number">15.</span> <span class="toc-text">15. Kafka中的消息是否会丢失？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E7%94%9F%E4%BA%A7%E8%80%85%E7%AB%AF%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1"><span class="toc-number">15.0.1.</span> <span class="toc-text">1. 生产者端消息丢失</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E6%B6%88%E8%B4%B9%E8%80%85%E7%AB%AF%E6%B6%88%E6%81%AF%E4%B8%A2%E5%A4%B1%EF%BC%9A"><span class="toc-number">15.0.2.</span> <span class="toc-text">2. 消费者端消息丢失：</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#16-%E5%A6%82%E4%BD%95%E4%BF%9D%E8%AF%81%E6%B6%88%E6%81%AF%E4%B8%8D%E4%BC%9A%E8%A2%AB%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9%EF%BC%9F"><span class="toc-number">16.</span> <span class="toc-text">16. 如何保证消息不会被重复消费？</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">16.0.1.</span> <span class="toc-text">消息重复消费的原因</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E6%9E%9C%E7%A1%AE%E4%BF%9D%E6%B6%88%E6%81%AF%E4%B8%8D%E4%BC%9A%E9%87%8D%E5%A4%8D%E6%B6%88%E8%B4%B9"><span class="toc-number">16.0.2.</span> <span class="toc-text">如果确保消息不会重复消费</span></a></li></ol></li></ol></li></ol>
    </nav>
  </div>
</aside>

<main class="main" role="main">
  <div class="content">
  <article id="post-mq/Kafka/03.Kafka面试题" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      
        
  
    <h1 class="article-title" itemprop="name">
      Kafka常见面试题
    </h1>
  

      
      <div class="article-meta">
        <span class="article-date">
    <i class="icon icon-calendar-check"></i>
	<a href="/posts/fe06768f.html" class="article-date">
	  <time datetime="2020-11-01T15:47:21.000Z" itemprop="datePublished">2020-11-01</time>
	</a>
</span>
        
  <span class="article-category">
    <i class="icon icon-folder"></i>
    <a class="article-category-link" href="/categories/MQ-Kafka/">MQ - Kafka</a>
  </span>

        
  <span class="article-tag">
    <i class="icon icon-tags"></i>
	<a class="article-tag-link-link" href="/tags/Kafka/" rel="tag">Kafka</a>, <a class="article-tag-link-link" href="/tags/MQ/" rel="tag">MQ</a>, <a class="article-tag-link-link" href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag">面试</a>
  </span>


        

        <span class="post-comment"><i class="icon icon-comment"></i> <a href="/posts/fe06768f.html#comments" class="article-comment-link">评论</a></span>
        
      </div>
    </div>
    <div class="article-entry marked-body" itemprop="articleBody">
      
        <h2 id="1-什么是kafka"><a href="#1-什么是kafka" class="headerlink" title="1. 什么是kafka"></a>1. 什么是kafka</h2><p>Kafka是<strong>分布式发布-订阅消息系统</strong>，它最初是由LinkedIn公司开发的，之后成为Apache项目的一部分，Kafka是一个<strong>分布式</strong>，<strong>可划分的</strong>，<strong>冗余备份</strong>的<strong>持久性</strong>的日志服务系统，它主要用于处理流式数据。</p>
<h2 id="2-为什么要使用-kafka，为什么要使用消息队列"><a href="#2-为什么要使用-kafka，为什么要使用消息队列" class="headerlink" title="2. 为什么要使用 kafka，为什么要使用消息队列"></a>2. 为什么要使用 kafka，为什么要使用消息队列</h2><p>缓冲和削峰：上游数据时有突发流量，下游可能扛不住，或者下游没有足够多的机器来保证冗余，kafka在中间可以起到一个缓冲的作用，把消息暂存在kafka中，下游服务就可以按照自己的节奏进行慢慢处理。</p>
<p>解耦和扩展性：项目开始的时候，并不能确定具体需求。消息队列可以作为一个接口层，解耦重要的业务流程。只需要遵守约定，针对数据编程即可获取扩展能力。</p>
<p>冗余：可以采用一对多的方式，一个生产者发布消息，可以被多个订阅topic的服务消费到，供多个毫无关联的业务使用。</p>
<p>健壮性：消息队列可以堆积请求，所以消费端业务即使短时间死掉，也不会影响主要业务的正常进行。</p>
<p>异步通信：很多时候，用户不想也不需要立即处理消息。消息队列提供了异步处理机制，允许用户把一个消息放入队列，但并不立即处理它。想向队列中放入多少消息就放多少，然后在需要的时候再去处理它们。</p>
<h2 id="3-Kafka中的ISR、AR又代表什么？ISR的伸缩又指什么"><a href="#3-Kafka中的ISR、AR又代表什么？ISR的伸缩又指什么" class="headerlink" title="3. Kafka中的ISR、AR又代表什么？ISR的伸缩又指什么"></a>3. Kafka中的ISR、AR又代表什么？ISR的伸缩又指什么</h2><p>ISR: In-Sync Replicas 副本同步队列<br>AR: Assigned Replicas 所有副本<br>ISR是由leader维护，follower从leader同步数据有一些延迟（包括延迟时间replica.lag.time.max.ms和延迟条数replica.lag.max.messages两个维度, 当前最新的版本0.10.x中只支持replica.lag.time.max.ms这个维度），任意一个超过阈值都会把follower剔除出ISR, 存入OSR（Outof-Sync Replicas）列表，新加入的follower也会先存放在OSR中。AR=ISR+OSR。</p>
<h2 id="4-kafka中的broker-是干什么的"><a href="#4-kafka中的broker-是干什么的" class="headerlink" title="4. kafka中的broker 是干什么的"></a>4. kafka中的broker 是干什么的</h2><p>broker 是消息的代理，Producers往Brokers里面的指定Topic中写消息，Consumers从Brokers里面拉取指定Topic的消息，然后进行业务处理，broker在中间起到一个<strong>代理保存消息的中转站</strong>。</p>
<h2 id="5-kafka中的-zookeeper-起到什么作用，可以不用zookeeper么"><a href="#5-kafka中的-zookeeper-起到什么作用，可以不用zookeeper么" class="headerlink" title="5. kafka中的 zookeeper 起到什么作用，可以不用zookeeper么"></a>5. kafka中的 zookeeper 起到什么作用，可以不用zookeeper么</h2><p>zookeeper 是一个分布式的<strong>协调组件</strong>，早期版本的kafka用zk做meta信息存储，consumer的消费状态，group的管理以及 offset的值。考虑到zk本身的一些因素以及整个架构较大概率存在单点问题，新版本中逐渐弱化了zookeeper的作用。新的consumer使用了kafka内部的group coordination协议，也减少了对zookeeper的依赖，</p>
<p>但是broker依然依赖于ZK，zookeeper 在kafka中还用来选举 leader 和 检测broker是否存活等等。</p>
<h2 id="6-kafka-follower如何与leader同步数据"><a href="#6-kafka-follower如何与leader同步数据" class="headerlink" title="6. kafka follower如何与leader同步数据"></a>6. kafka follower如何与leader同步数据</h2><p>Kafka的<strong>复制机制既不是完全的同步复制，也不是单纯的异步复制</strong>。完全同步复制要求All Alive Follower都复制完，这条消息才会被认为commit，这种复制方式极大的影响了吞吐率。而异步复制方式下，Follower异步的从Leader复制数据，数据只要被Leader写入log就被认为已经commit，这种情况下，如果leader挂掉，会丢失数据。<strong>Kafka使用ISR的方式很好的均衡了确保数据不丢失以及吞吐率</strong>。Follower可以批量的从Leader复制数据，而且Leader充分利用<strong>磁盘顺序读</strong>以及<strong>send file(zero copy)机制</strong>，这样极大的提高复制性能，内部批量写磁盘，大幅减少了Follower与Leader的消息量差。</p>
<h2 id="7-什么情况下一个-broker-会从-isr中踢出去"><a href="#7-什么情况下一个-broker-会从-isr中踢出去" class="headerlink" title="7. 什么情况下一个 broker 会从 isr中踢出去"></a>7. 什么情况下一个 broker 会从 isr中踢出去</h2><p>leader会维护一个与其基本保持同步的Replica列表，该列表称为ISR(in-sync Replica)，每个Partition都会有一个ISR，而且是由leader动态维护 ，如果一个follower比一个leader落后太多，或者超过一定时间未发起数据复制请求，则leader将其重ISR中移除 。</p>
<h2 id="8-kafka-为什么那么快"><a href="#8-kafka-为什么那么快" class="headerlink" title="8. kafka 为什么那么快"></a>8. kafka 为什么那么快</h2><p>Cache Filesystem Cache PageCache 缓存</p>
<p><strong>顺序写</strong> 由于现代的操作系统提供了预读和写技术，磁盘的顺序写大多数情况下比随机写内存还要快。</p>
<p><strong>Zero-copy 零拷贝技术</strong> 减少拷贝次数</p>
<p><strong>Batching of Messages 批量量处理</strong>。合并小的请求，然后以流的方式进行交互，直顶网络上限。</p>
<p>Pull 拉模式 <strong>使用拉模式进行消息的获取消费</strong>，与消费端处理能力相符。</p>
<h2 id="9-kafka-producer如何优化打入速度"><a href="#9-kafka-producer如何优化打入速度" class="headerlink" title="9. kafka producer如何优化打入速度"></a>9. kafka producer如何优化打入速度</h2><p>增加线程</p>
<p>提高 batch.size</p>
<p>增加更多 producer 实例</p>
<p>增加 partition 数</p>
<p>设置 acks=-1 时，如果延迟增大：可以增大 num.replica.fetchers（follower 同步数据的线程数）来调解；</p>
<p>跨数据中心的传输：增加 socket 缓冲区设置以及 OS tcp 缓冲区设置。</p>
<h2 id="10-kafka-producer-打数据，ack-为-0，-1，-1-的时候代表啥，-设置-1-的时候，什么情况下，leader-会认为一条消息-commit了"><a href="#10-kafka-producer-打数据，ack-为-0，-1，-1-的时候代表啥，-设置-1-的时候，什么情况下，leader-会认为一条消息-commit了" class="headerlink" title="10. kafka producer 打数据，ack  为 0， 1， -1 的时候代表啥， 设置 -1 的时候，什么情况下，leader 会认为一条消息 commit了"></a>10. kafka producer 打数据，ack  为 0， 1， -1 的时候代表啥， 设置 -1 的时候，什么情况下，leader 会认为一条消息 commit了</h2><p>1（默认）  数据发送到Kafka后，经过leader成功接收消息的的确认，就算是发送成功了。在这种情况下，如果leader宕机了，则会丢失数据。<br>0 生产者将数据发送出去就不管了，不去等待任何返回。这种情况下数据传输效率最高，但是数据可靠性确是最低的。<br>-1 producer需要等待ISR中的所有follower都确认接收到数据后才算一次发送完成，可靠性最高。当ISR中所有Replica都向Leader发送ACK时，leader才commit，这时候producer才能认为一个请求中的消息都commit了。</p>
<h2 id="11-kafka-unclean-配置代表啥，会对-spark-streaming-消费有什么影响"><a href="#11-kafka-unclean-配置代表啥，会对-spark-streaming-消费有什么影响" class="headerlink" title="11. kafka  unclean 配置代表啥，会对 spark streaming 消费有什么影响"></a>11. kafka  unclean 配置代表啥，会对 spark streaming 消费有什么影响</h2><p>unclean.leader.election.enable 为true的话，意味着非ISR集合的broker 也可以参与选举，这样有可能就会丢数据，spark streaming在消费过程中拿到的 end offset 会突然变小，导致 spark streaming job挂掉。如果unclean.leader.election.enable参数设置为true，就有可能发生数据丢失和数据不一致的情况，Kafka的可靠性就会降低；而如果unclean.leader.election.enable参数设置为false，Kafka的可用性就会降低。</p>
<h2 id="12-如果leader-crash时，ISR为空怎么办"><a href="#12-如果leader-crash时，ISR为空怎么办" class="headerlink" title="12. 如果leader crash时，ISR为空怎么办"></a>12. 如果leader crash时，ISR为空怎么办</h2><p>kafka在Broker端提供了一个配置参数：unclean.leader.election,这个参数有两个值：<br>true（默认）：允许不同步副本成为leader，由于不同步副本的消息较为滞后，此时成为leader，可能会出现消息不一致的情况。<br>false：不允许不同步副本成为leader，此时如果发生ISR列表为空，会一直等待旧leader恢复，降低了可用性。</p>
<h2 id="13-kafka的message格式是什么样的"><a href="#13-kafka的message格式是什么样的" class="headerlink" title="13. kafka的message格式是什么样的"></a>13. kafka的message格式是什么样的</h2><p>一个Kafka的Message由一个固定长度的header和一个变长的消息体body组成<br>header部分由<strong>一个字节的magic</strong>(文件格式)和<strong>四个字节的CRC32</strong>(用于判断body消息体是否正常)构成。<br>当magic的值为1的时候，会在magic和crc32之间多一个字节的数据：attributes(保存一些相关属性，<br>比如是否压缩、压缩格式等等);如果magic的值为0，那么不存在attributes属性<br><strong>body是由N个字节构成的一个消息体，包含了具体的key/value消息</strong></p>
<p><img src="http://bucket-img01.oss-cn-shenzhen.aliyuncs.com/cs-note/01.Kafka%E9%9D%A2%E8%AF%95%E9%A2%98-2020-10-27-08-37-50.png" alt="01.Kafka面试题-2020-10-27-08-37-50"></p>
<blockquote>
<p>CRC ： 校验码<br>Magic ：版本号：0，1，2，对应目前的三个版本<br>Attribute ： 属性字段，目前使用后3位存储压缩类型<br>Key len ：key长度<br>Key ：key值<br>Value len：value长度<br>Value ：具体消息内容</p>
</blockquote>
<h2 id="14-kafka中consumer-group-是什么概念"><a href="#14-kafka中consumer-group-是什么概念" class="headerlink" title="14. kafka中consumer group 是什么概念"></a>14. kafka中consumer group 是什么概念</h2><p>同样是逻辑上的概念，是Kafka实现单播和广播两种消息模型的手段。同一个topic的数据，会广播给不同的group；同一个group中的worker，只有一个worker能拿到这个数据。换句话说，对于同一个topic，每个group都可以拿到同样的所有数据，但是数据进入group后只能被其中的一个worker消费。group内的worker可以使用多线程或多进程来实现，也可以将进程分散在多台机器上，worker的数量通常不超过partition的数量，且二者最好保持整数倍关系，因为Kafka在设计时假定了一个partition只能被一个worker消费（同一group内）。</p>
<h2 id="15-Kafka中的消息是否会丢失？"><a href="#15-Kafka中的消息是否会丢失？" class="headerlink" title="15. Kafka中的消息是否会丢失？"></a>15. Kafka中的消息是否会丢失？</h2><p>要确定Kafka的消息是否丢失或重复，从两个方面分析入手：消息发送和消息消费。</p>
<h4 id="1-生产者端消息丢失"><a href="#1-生产者端消息丢失" class="headerlink" title="1. 生产者端消息丢失"></a>1. 生产者端消息丢失</h4><p><strong>Kafka消息发送方式</strong>有两种：同步（sync）和异步（async），默认是同步方式，可通过producer.type属性进行配置。</p>
<ul>
<li>同步: 这个生产者写一条消息的时候，它就立马发送到某个分区去。follower还需要从leader拉取消息到本地，follower再向leader发送确认，leader再向客户端发送确认。由于这一套流程之后，客户端才能得到确认，所以很慢。</li>
<li>异步: 这个生产者写一条消息的时候，先是写到某个缓冲区，这个缓冲区里的数据还没写到broker集群里的某个分区的时候，它就返回到client去了。虽然效率快，但是不能保证消息一定被发送出去了。</li>
</ul>
<p><strong>Kafka消息生产确认方式</strong>有三种，通过配置request.required.acks属性来<strong>确认消息的生产</strong>：</p>
<ul>
<li>0: 表示不进行消息接收是否成功的确认；</li>
<li>1: 表示当Leader接收成功时确认；</li>
<li>-1: 表示Leader和Follower都接收成功时确认；</li>
</ul>
<p>生产端有6种消息生产的情况，下面分情况来分析消息丢失的场景：<br>（1）acks=0，不和Kafka集群进行消息接收确认，则当网络异常、缓冲区满了等情况时，消息可能丢失；<br>（2）acks=1、同步模式下，只有Leader确认接收成功后但挂掉了，副本没有同步，数据可能丢失；</p>
<h4 id="2-消费者端消息丢失："><a href="#2-消费者端消息丢失：" class="headerlink" title="2. 消费者端消息丢失："></a>2. 消费者端消息丢失：</h4><p>consumer端丢失消息的情形比较简单：消息消费者从集群中把消息取出来、并提交了新的消息offset值后，还没来得及消费就挂掉了，那么下次再消费时之前没消费成功的消息就“诡异”的消失了；</p>
<p>消息丢失解决办法：</p>
<ul>
<li><p>生产端：<br>同步模式下，确认机制设置为-1，即让消息写入Leader和Follower之后再确认消息发送成功；<br>异步模式下，为防止缓冲区满，可以在<strong>配置文件设置不限制阻塞超时时间</strong>，当缓冲区满时让生产者一直处于阻塞状态</p>
</li>
<li><p>消费端<br>enable.auto.commit=false  关闭自动提交位移<br>在消息被完整处理之后再手动提交位移</p>
</li>
</ul>
<h2 id="16-如何保证消息不会被重复消费？"><a href="#16-如何保证消息不会被重复消费？" class="headerlink" title="16. 如何保证消息不会被重复消费？"></a>16. 如何保证消息不会被重复消费？</h2><h4 id="消息重复消费的原因"><a href="#消息重复消费的原因" class="headerlink" title="消息重复消费的原因"></a>消息重复消费的原因</h4><p>比如 RabbitMQ、RocketMQ、Kafka，都有可能会出现消息重复消费的问题，正常。因为这问题通常不是 MQ 自己保证的，是由我们开发来保证的。<br>Kafka 实际上有个 offset 的概念，就是每个消息写进去，都有一个 offset，代表消息的序号，然后 consumer 消费了数据之后，每隔一段时间（定时定期），会把自己消费过的消息的 offset 提交一下，表示“我已经消费过了，下次我要是重启啥的，你就让我继续从上次消费到的 offset 来继续消费吧”。</p>
<p>但是凡事总有意外，比如我们之前生产经常遇到的，就是你有时候重启系统，看你怎么重启了，如果碰到点着急的，直接 kill 进程了，再重启。这会导致 consumer 有些消息处理了，但是没来得及提交 offset，尴尬了。重启之后，少数消息会再次消费一次。</p>
<p><img src="http://bucket-img01.oss-cn-shenzhen.aliyuncs.com/cs-note/01.Kafka%E9%9D%A2%E8%AF%95%E9%A2%98-2020-10-27-09-08-49.png" alt="01.Kafka面试题-2020-10-27-09-08-49"></p>
<h4 id="如果确保消息不会重复消费"><a href="#如果确保消息不会重复消费" class="headerlink" title="如果确保消息不会重复消费"></a>如果确保消息不会重复消费</h4><p>其实重复消费不可怕，可怕的是你没考虑到重复消费之后，怎么保证幂等性。幂等性，通俗点说，就一个数据，或者一个请求，给你重复来多次，你得确保对应的数据是不会改变的，不能出错。一条数据重复出现两次，数据库里就只有一条数据，这就保证了系统的幂等性。</p>
<p>其实还是得结合业务来思考，我这里给几个思路：<br>比如你拿个数据要写库，你先根据主键查一下，如果这数据都有了，你就别插入了，update 一下好吧。</p>
<p>比如你是写 Redis，那没问题了，反正每次都是 set，天然幂等性。</p>
<p>比如你不是上面两个场景，那做的稍微复杂一点，你需要让生产者发送每条数据的时候，里面加一个全局唯一的 id，类似订单 id 之类的东西，然后你这里消费到了之后，先根据这个 id 去比如 Redis 里查一下，之前消费过吗？如果没有消费过，你就处理，然后这个 id 写 Redis。如果消费过了，那你就别处理了，保证别重复处理相同的消息即可。</p>
<p>比如基于数据库的唯一键来保证重复数据不会重复插入多条。因为有唯一键约束了，重复数据插入只会报错，不会导致数据库中出现脏数据。</p>

      
    </div>
    <div class="article-footer">
      <blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    
    <li class="post-copyright-link hidden-xs">
      <strong>本文链接：</strong>
      <a href="http://blog.luodexin.com/posts/fe06768f.html" title="Kafka常见面试题" target="_blank" rel="external">http://blog.luodexin.com/posts/fe06768f.html</a>
    </li>
    
    <li class="post-copyright-license">
      <strong>版权声明： </strong> 本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！
    </li>
  </ul>
</blockquote>


<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://www.luodexin.com" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="/images/avatar.jpg" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://www.luodexin.com" target="_blank"><span class="text-dark">Dexin L.</span><small class="ml-1x">Software Developer</small></a></h3>
        <div>Coding Life</div>
      </div>
    </figure>
  </div>
</div>


    </div>
  </article>
  
    

  
</div>

  <nav class="bar bar-footer clearfix" data-stick-bottom>
  <div class="bar-inner">
  
  <ul class="pager pull-left">
    
    
    <li class="next">
      <a href="/posts/a221d6b6.html" title="MySQL事务的实现"><span>下一篇&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a>
    </li>
    
    
    <li class="toggle-toc">
      <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="文章目录" role="button">
        <span>[&nbsp;</span><span>文章目录</span>
        <i class="text-collapsed icon icon-anchor"></i>
        <i class="text-in icon icon-close"></i>
        <span>]</span>
      </a>
    </li>
    
  </ul>
  
  
  <!-- Button trigger modal -->
  <button type="button" class="btn btn-fancy btn-donate pop-onhover bg-gradient-warning" data-toggle="modal" data-target="#donateModal"><span>赏</span></button>
  <!-- <div class="wave-icon wave-icon-danger btn-donate" data-toggle="modal" data-target="#donateModal">
    <div class="wave-circle"><span class="icon"><i class="icon icon-bill"></i></span></div>
  </div> -->
  
  
  <div class="bar-right">
    
    <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter" data-mobile-sites="weibo,qq,qzone"></div>
    
  </div>
  </div>
</nav>
  
<!-- Modal -->
<div class="modal modal-center modal-small modal-xs-full fade" id="donateModal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content donate">
      <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
      <div class="modal-body">
        <div class="donate-box">
          <div class="donate-head">
            <p>感谢您的支持，我会继续努力的!</p>
          </div>
          <div class="tab-content">
            <div role="tabpanel" class="tab-pane fade active in" id="alipay">
              <div class="donate-payimg">
                <img src="/images/donate/alipayimg.jpg" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开支付宝扫一扫，即可进行扫码打赏哦</p>
            </div>
            <div role="tabpanel" class="tab-pane fade" id="wechatpay">
              <div class="donate-payimg">
                <img src="/images/donate/wechatpayimg.jpg" alt="扫码支持" title="扫一扫" />
              </div>
              <p class="text-muted mv">扫码打赏，你说多少就多少</p>
              <p class="text-grey">打开微信扫一扫，即可进行扫码打赏哦</p>
            </div>
          </div>
          <div class="donate-footer">
            <ul class="nav nav-tabs nav-justified" role="tablist">
              <li role="presentation" class="active">
                <a href="#alipay" id="alipay-tab" role="tab" data-toggle="tab" aria-controls="alipay" aria-expanded="true"><i class="icon icon-alipay"></i> 支付宝</a>
              </li>
              <li role="presentation" class="">
                <a href="#wechatpay" role="tab" id="wechatpay-tab" data-toggle="tab" aria-controls="wechatpay" aria-expanded="false"><i class="icon icon-wepay"></i> 微信支付</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



</main>

  <footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
	
	
    <ul class="social-links">
    	
        <li><a href="https://github.com/luodexin" target="_blank" title="Github" data-toggle=tooltip data-placement=top><i class="icon icon-github"></i></a></li>
        
        <li><a href="/atom.xml" target="_blank" title="Rss" data-toggle=tooltip data-placement=top><i class="icon icon-rss"></i></a></li>
        
    </ul>

    <div class="copyright">
    	
        <div class="publishby">
        	Theme by <a href="https://github.com/cofess" target="_blank"> cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.
        </div>
    </div>
</footer>
  <script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
<script>
window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>

<script src="/js/plugin.min.js"></script>


<script src="/js/application.js"></script>


    <script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>

<script src="/js/insight.js"></script>






   









</body>
</html>